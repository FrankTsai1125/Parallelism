â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ä½œä¸šè§„å®šåˆè§„æ€§æ£€æŸ¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“œ ä½œä¸šå…³é”®è§„å®š

æ ¹æ® PDF "Assignment 2 - SIFT.pdf" çš„è¦æ±‚ï¼š

**æ ¸å¿ƒè§„å®š**:
"You are not allowed to use mathematical techniques to bypass or reduce 
the computational complexity and the iteration process of calculating SIFT 
(i.e., do not modify the parameters in the sample code)."

ç¿»è¯‘ï¼š
**ç¦æ­¢**ä½¿ç”¨æ•°å­¦æŠ€å·§ç»•è¿‡æˆ–é™ä½ SIFT è®¡ç®—çš„å¤æ‚åº¦å’Œè¿­ä»£è¿‡ç¨‹
**ç¦æ­¢**ä¿®æ”¹ç¤ºä¾‹ä»£ç ä¸­çš„å‚æ•°

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… æ£€æŸ¥é¡¹ç›® 1: SIFT å‚æ•°æ˜¯å¦è¢«ä¿®æ”¹ï¼Ÿ

### æ£€æŸ¥ sift.hpp ä¸­çš„å‚æ•°å®šä¹‰ï¼š

```cpp
// åŸå§‹å‚æ•°ï¼ˆä¸å…è®¸ä¿®æ”¹ï¼‰
const int MAX_REFINEMENT_ITERS = 5;
const float SIGMA_MIN = 0.8;
const float MIN_PIX_DIST = 0.5;
const float SIGMA_IN = 0.5;
const int N_OCT = 8;              // octaves æ•°é‡
const int N_SPO = 5;              // scales per octave
const float C_DOG = 0.015;        // contrast threshold
const float C_EDGE = 10;          // edge threshold

const int N_BINS = 36;
const float LAMBDA_ORI = 1.5;
const int N_HIST = 4;
const int N_ORI = 8;
const float LAMBDA_DESC = 6;

const float THRESH_ABSOLUTE = 350;
const float THRESH_RELATIVE = 0.7;
```

**ç»“æœ**: âœ… **æœªä¿®æ”¹ä»»ä½•å‚æ•°**
æ‰€æœ‰å‚æ•°å€¼ä¿æŒåŸæ ·ï¼Œç¬¦åˆä½œä¸šè¦æ±‚ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… æ£€æŸ¥é¡¹ç›® 2: æ˜¯å¦ç»•è¿‡äº†è®¡ç®—å¤æ‚åº¦ï¼Ÿ

### æ£€æŸ¥çš„ä¼˜åŒ–ç±»å‹ï¼š

1. **DoG Pyramid ä¼˜åŒ–** (å·²å®æ–½):
   - ä¿®æ”¹å‰: `Image diff = img_pyramid.octaves[i][j];` (æ‹·è´å›¾åƒ)
   - ä¿®æ”¹å: ç›´æ¥åˆ›å»ºæ–°å›¾åƒï¼Œé¿å…æ‹·è´
   - **åˆ¤å®š**: âœ… è¿™æ˜¯**å†…å­˜ä¼˜åŒ–**ï¼Œä¸æ˜¯ç®—æ³•ä¼˜åŒ–
   - **ç¬¦åˆè§„å®š**: æ˜¯ï¼Œä»ç„¶è®¡ç®—æ‰€æœ‰ DoG images

2. **OpenMP å¹¶è¡ŒåŒ–** (å·²å®æ–½):
   - åœ¨ `generate_dog_pyramid`, `generate_gradient_pyramid`, 
     `find_keypoints`, `find_keypoints_and_descriptors` ä¸­æ·»åŠ  OpenMP
   - **åˆ¤å®š**: âœ… è¿™æ˜¯**å¹¶è¡ŒåŒ–ä¼˜åŒ–**ï¼Œä¸æ”¹å˜ç®—æ³•
   - **ç¬¦åˆè§„å®š**: æ˜¯ï¼Œæ‰€æœ‰è®¡ç®—éƒ½æ‰§è¡Œäº†

3. **MPI åˆ†å¸ƒå¼å¤„ç†** (å·²å®æ–½):
   - å°† octaves åˆ†é…ç»™ä¸åŒ ranks å¤„ç†
   - **åˆ¤å®š**: âœ… è¿™æ˜¯**åˆ†å¸ƒå¼è®¡ç®—**ï¼Œä¸æ”¹å˜ç®—æ³•
   - **ç¬¦åˆè§„å®š**: æ˜¯ï¼Œæ‰€æœ‰ octaves éƒ½è¢«å¤„ç†

4. **æœªå®æ–½çš„ä¼˜åŒ–** (å·²æ‹’ç»):
   - Pyramid æŒ‰éœ€æ„å»ºï¼ˆåªæ„å»ºéƒ¨åˆ† scalesï¼‰
   - **åˆ¤å®š**: âŒ å¦‚æœå®æ–½ï¼Œä¼šè¿åè§„å®š
   - **åŸå› **: è·³è¿‡éƒ¨åˆ† scales ä¼šæ”¹å˜ç®—æ³•
   - **çŠ¶æ€**: âœ… å·²æ‹’ç»å®æ–½ï¼Œç¬¦åˆè§„å®š

**ç»“æœ**: âœ… **æœªç»•è¿‡ä»»ä½•è®¡ç®—å¤æ‚åº¦**
æ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼ˆå†…å­˜ã€å¹¶è¡ŒåŒ–ï¼‰ï¼Œä¸æ”¹å˜ç®—æ³•é€»è¾‘ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… æ£€æŸ¥é¡¹ç›® 3: æ˜¯å¦è·³è¿‡äº†è¿­ä»£è¿‡ç¨‹ï¼Ÿ

### æ£€æŸ¥å„ä¸ªå‡½æ•°çš„è¿­ä»£ï¼š

1. **`generate_gaussian_pyramid`**:
   ```cpp
   for (int i = 0; i < num_octaves; i++) {              // âœ… å¤„ç†æ‰€æœ‰ octaves
       for (int j = 1; j < sigma_vals.size(); j++) {    // âœ… å¤„ç†æ‰€æœ‰ scales
           pyramid.octaves[i].push_back(gaussian_blur(...));
       }
   }
   ```
   **åˆ¤å®š**: âœ… æ‰€æœ‰è¿­ä»£éƒ½æ‰§è¡Œ

2. **`generate_dog_pyramid`**:
   ```cpp
   for (int i = 0; i < dog_pyramid.num_octaves; i++) { // âœ… æ‰€æœ‰ octaves
       for (int j = 1; j < img_pyramid.imgs_per_octave; j++) { // âœ… æ‰€æœ‰ scales
           // è®¡ç®— DoG
       }
   }
   ```
   **åˆ¤å®š**: âœ… æ‰€æœ‰è¿­ä»£éƒ½æ‰§è¡Œ

3. **`find_keypoints`**:
   ```cpp
   for (int i = 0; i < dog_pyramid.num_octaves; i++) { // âœ… æ‰€æœ‰ octaves
       for (int j = 1; j < dog_pyramid.imgs_per_octave-1; j++) { // âœ… æ‰€æœ‰ scales
           // æ£€æµ‹ extrema
       }
   }
   ```
   **åˆ¤å®š**: âœ… æ‰€æœ‰è¿­ä»£éƒ½æ‰§è¡Œ

4. **`refine_or_discard_keypoint`**:
   ```cpp
   while (k++ < MAX_REFINEMENT_ITERS) {  // âœ… æœ€å¤š 5 æ¬¡è¿­ä»£ï¼ˆå‚æ•°æœªæ”¹ï¼‰
       // ç²¾ç‚¼ keypoint
   }
   ```
   **åˆ¤å®š**: âœ… è¿­ä»£è¿‡ç¨‹å®Œæ•´

**ç»“æœ**: âœ… **æœªè·³è¿‡ä»»ä½•è¿­ä»£è¿‡ç¨‹**
æ‰€æœ‰å¾ªç¯å’Œè¿­ä»£éƒ½å®Œæ•´æ‰§è¡Œã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… æ£€æŸ¥é¡¹ç›® 4: è¾“å‡ºéªŒè¯é€»è¾‘æ˜¯å¦è¢«ä¿®æ”¹ï¼Ÿ

### æ£€æŸ¥ hw2.cpp ä¸­çš„éªŒè¯ä»£ç ï¼š

```cpp
// hw2.cpp ç¬¬ 87-107 è¡Œ
if (world_rank == 0) {
    /////////////////////////////////////////////////////////////
    // The following code is for the validation
    // You can not change the logic of the following code, 
    // because it is used for judge system
    std::ofstream ofs(output_txt);
    if (!ofs) {
        std::cerr << "Failed to open " << output_txt << " for writing.\n";
    } else {
        ofs << kps.size() << "\n";
        for (const auto& kp : kps) {
            ofs << kp.i << " " << kp.j << " " << kp.octave << " " << kp.scale << " ";
            for (size_t i = 0; i < kp.descriptor.size(); ++i) {
                ofs << " " << static_cast<int>(kp.descriptor[i]);
            }
            ofs << "\n";
        }
        ofs.close();
    }

    Image result = draw_keypoints(img, kps);
    result.save(output_img);
    /////////////////////////////////////////////////////////////
}
```

**ç»“æœ**: âœ… **éªŒè¯é€»è¾‘æœªè¢«ä¿®æ”¹**
è¾“å‡ºæ ¼å¼å’Œé€»è¾‘ä¸åŸå§‹ä»£ç å®Œå…¨ä¸€è‡´ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… æ£€æŸ¥é¡¹ç›® 5: ç®—æ³•æ ¸å¿ƒé€»è¾‘æ˜¯å¦è¢«ä¿®æ”¹ï¼Ÿ

### æ£€æŸ¥å…³é”®å‡½æ•°ï¼š

1. **`point_is_extremum`**: âœ… æœªä¿®æ”¹
   - ä»ç„¶æ£€æŸ¥ 3x3x3 neighborhood

2. **`fit_quadratic`**: âœ… æœªä¿®æ”¹
   - ä»ç„¶è®¡ç®— Hessian å’Œæ¢¯åº¦
   - ä»ç„¶æ±‚è§£äºŒæ¬¡æ–¹ç¨‹

3. **`point_is_on_edge`**: âœ… æœªä¿®æ”¹
   - ä»ç„¶ä½¿ç”¨ edge threshold æ£€æµ‹

4. **`find_keypoint_orientations`**: âœ… æœªä¿®æ”¹
   - ä»ç„¶æ„å»º histogram
   - ä»ç„¶å¹³æ»‘ histogramï¼ˆ6æ¬¡å·ç§¯ï¼‰

5. **`compute_keypoint_descriptor`**: âœ… æœªä¿®æ”¹
   - ä»ç„¶è®¡ç®— 4x4x8 histogram
   - ä»ç„¶å½’ä¸€åŒ–

**ç»“æœ**: âœ… **ç®—æ³•æ ¸å¿ƒé€»è¾‘æœªè¢«ä¿®æ”¹**
æ‰€æœ‰ SIFT ç®—æ³•çš„æ•°å­¦è®¡ç®—éƒ½ä¿æŒåŸæ ·ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“Š ä¼˜åŒ–æ€»ç»“

### å·²å®æ–½çš„ä¼˜åŒ–ï¼ˆå…¨éƒ¨ç¬¦åˆè§„å®šï¼‰ï¼š

1. âœ… **OpenMP å¹¶è¡ŒåŒ–**
   - ç›®çš„ï¼šåˆ©ç”¨å¤šæ ¸å¿ƒå¹¶è¡Œè®¡ç®—
   - ä¸æ”¹å˜ç®—æ³•ï¼šä»…æ”¹å˜æ‰§è¡Œé¡ºåºï¼ˆå¹¶è¡Œï¼‰ï¼Œä¸æ”¹å˜è®¡ç®—å†…å®¹

2. âœ… **MPI åˆ†å¸ƒå¼å¤„ç†**
   - ç›®çš„ï¼šåˆ©ç”¨å¤šèŠ‚ç‚¹/å¤šè¿›ç¨‹
   - ä¸æ”¹å˜ç®—æ³•ï¼šoctaves åˆ†é…ç»™ä¸åŒ ranksï¼Œæ‰€æœ‰ octaves ä»è¢«å¤„ç†

3. âœ… **DoG æ‹·è´æ¶ˆé™¤**
   - ç›®çš„ï¼šå‡å°‘å†…å­˜æ‹·è´å¼€é”€
   - ä¸æ”¹å˜ç®—æ³•ï¼šä»ç„¶è®¡ç®—æ‰€æœ‰ DoG imagesï¼Œåªæ˜¯é¿å…ä¸­é—´æ‹·è´

4. âœ… **ç›´æ¥å†…å­˜è®¿é—®**
   - ç›®çš„ï¼šå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€
   - ä¸æ”¹å˜ç®—æ³•ï¼šç”¨æŒ‡é’ˆè®¿é—®ä»£æ›¿ get_pixel/set_pixel å‡½æ•°

5. âœ… **çº¿ç¨‹å±€éƒ¨ç´¯ç§¯**
   - ç›®çš„ï¼šå‡å°‘ critical section ç«äº‰
   - ä¸æ”¹å˜ç®—æ³•ï¼šæ¯ä¸ªçº¿ç¨‹ç´¯ç§¯è‡ªå·±çš„ç»“æœï¼Œæœ€ååˆå¹¶

6. âœ… **ç¼–è¯‘å™¨ä¼˜åŒ–æ ‡å¿—**
   - ç›®çš„ï¼šè®©ç¼–è¯‘å™¨ç”Ÿæˆæ›´å¿«çš„ä»£ç 
   - ä¸æ”¹å˜ç®—æ³•ï¼š`-Ofast`, `-march=native` ç­‰

### æ‹’ç»çš„ä¼˜åŒ–ï¼ˆå¯èƒ½è¿åè§„å®šï¼‰ï¼š

1. âŒ **Pyramid æŒ‰éœ€æ„å»º**
   - ä¼šè·³è¿‡éƒ¨åˆ† scales
   - **è¿åè§„å®š**ï¼šæ”¹å˜äº†è®¡ç®—çš„ scales æ•°é‡
   - **çŠ¶æ€**ï¼šå·²æ‹’ç»å®æ–½

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ¯ æœ€ç»ˆåˆ¤å®š

### âœ… å®Œå…¨ç¬¦åˆä½œä¸šè§„å®š

1. âœ… æ‰€æœ‰ SIFT å‚æ•°æœªè¢«ä¿®æ”¹
2. âœ… ç®—æ³•å¤æ‚åº¦æœªè¢«ç»•è¿‡
3. âœ… è¿­ä»£è¿‡ç¨‹å®Œæ•´æ‰§è¡Œ
4. âœ… è¾“å‡ºéªŒè¯é€»è¾‘æœªæ”¹åŠ¨
5. âœ… æ ¸å¿ƒç®—æ³•é€»è¾‘ä¿æŒåŸæ ·

### ä¼˜åŒ–ç­–ç•¥æ­£ç¡®æ€§

æ‰€æœ‰å®æ–½çš„ä¼˜åŒ–éƒ½å±äºï¼š
- **å¹¶è¡ŒåŒ–ä¼˜åŒ–**ï¼šOpenMP, MPI
- **å†…å­˜ä¼˜åŒ–**ï¼šæ¶ˆé™¤æ‹·è´ï¼Œç›´æ¥è®¿é—®
- **ç¼–è¯‘å™¨ä¼˜åŒ–**ï¼šä¼˜åŒ–æ ‡å¿—

è¿™äº›ä¼˜åŒ–ï¼š
- âœ… ä¸æ”¹å˜ç®—æ³•çš„æ•°å­¦é€»è¾‘
- âœ… ä¸å‡å°‘è®¡ç®—é‡
- âœ… ä¸è·³è¿‡ä»»ä½•å¿…è¦çš„æ­¥éª¤
- âœ… äº§ç”Ÿä¸åŸå§‹ä»£ç ç›¸åŒçš„ç»“æœ

### æµ‹è¯•ç»“æœéªŒè¯

- æ‰€æœ‰ 8/8 æµ‹è¯•é€šè¿‡ âœ…
- é€šè¿‡ hw2-judge éªŒè¯ âœ…
- è¾“å‡ºä¸ golden åŒ¹é… âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“ ç»“è®º

**å½“å‰ä»£ç å®Œå…¨ç¬¦åˆä½œä¸šPDFçš„æ‰€æœ‰è§„å®šã€‚**

æ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼ˆå¹¶è¡ŒåŒ–ã€å†…å­˜ä¼˜åŒ–ï¼‰ï¼Œæ²¡æœ‰ä¿®æ”¹ SIFT ç®—æ³•çš„ï¼š
- å‚æ•°å€¼
- è®¡ç®—å¤æ‚åº¦
- è¿­ä»£è¿‡ç¨‹
- æ ¸å¿ƒé€»è¾‘

ä»£ç å¯ä»¥å®‰å…¨æäº¤ã€‚

